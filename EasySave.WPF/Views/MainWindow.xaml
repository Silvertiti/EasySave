<Window x:Class="EasySave.WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="EasySave" Height="650" Width="1050"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None" ResizeMode="CanResize"
        AllowsTransparency="True" Background="Transparent"
        MouseDown="Window_MouseDown">

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="32" ResizeBorderThickness="5" GlassFrameThickness="0" CornerRadius="0"/>
    </WindowChrome.WindowChrome>

    <Window.Resources>
        <SolidColorBrush x:Key="BgDark" Color="#121212"/>
        <SolidColorBrush x:Key="BgPanel" Color="#1E1E1E"/>
        <SolidColorBrush x:Key="BorderColor" Color="#333333"/>
        <SolidColorBrush x:Key="TextPrimary" Color="#E0E0E0"/>
        <SolidColorBrush x:Key="TextSecondary" Color="#909090"/>

        <LinearGradientBrush x:Key="PrimaryGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#10B981" Offset="0.0"/>
            <GradientStop Color="#047857" Offset="1.0"/>
        </LinearGradientBrush>

        <LinearGradientBrush x:Key="PrimaryGradientHover" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#34D399" Offset="0.0"/>
            <GradientStop Color="#059669" Offset="1.0"/>
        </LinearGradientBrush>

        <Geometry x:Key="IconClose">M13.46,12L19,17.54V19H17.54L12,13.46L6.46,19H5V17.54L10.54,12L5,6.46V5H6.46L12,10.54L17.54,5H19V6.46L13.46,12Z</Geometry>
        <Geometry x:Key="IconMax">M4,4H20V20H4V4M6,6V18H18V6H6Z</Geometry>
        <Geometry x:Key="IconMin">M20,14H4V12H20V14Z</Geometry>
        <Geometry x:Key="IconPlay">M8,5.14V19.14L19,12.14L8,5.14Z</Geometry>
        <Geometry x:Key="IconTrash">M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z</Geometry>
        <Geometry x:Key="IconLogo">M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z</Geometry>
    </Window.Resources>

    <Border Background="{StaticResource BgDark}" BorderBrush="#444" BorderThickness="1" CornerRadius="8">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="35"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Grid Grid.Row="0" Background="Transparent">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="15,0,0,0">
                    <Path Data="{StaticResource IconLogo}" Fill="{StaticResource PrimaryGradient}" Width="14" Height="14" Stretch="Uniform" Margin="0,0,10,0"/>
                    <TextBlock Text="EasySave" Foreground="{StaticResource TextPrimary}" FontSize="13" FontWeight="SemiBold" VerticalAlignment="Center"/>
                    <TextBlock Text="MANAGER" Foreground="#555" FontSize="9" FontWeight="Bold" Margin="6,2,0,0" VerticalAlignment="Center"/>
                </StackPanel>

                <StackPanel Grid.Column="2" Orientation="Horizontal" Margin="0,0,5,0">
                    <Button Click="BtnMinimize_Click" Width="46" Height="32" Background="Transparent" BorderThickness="0" WindowChrome.IsHitTestVisibleInChrome="True">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="bdr" Background="Transparent" CornerRadius="4">
                                    <Path Data="{StaticResource IconMin}" Fill="{StaticResource TextSecondary}" Width="10" Height="10" Stretch="Uniform" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="bdr" Property="Background" Value="#333"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button Click="BtnMaximize_Click" Width="46" Height="32" Background="Transparent" BorderThickness="0" WindowChrome.IsHitTestVisibleInChrome="True">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="bdr" Background="Transparent" CornerRadius="4">
                                    <Path Data="{StaticResource IconMax}" Fill="{StaticResource TextSecondary}" Width="10" Height="10" Stretch="Uniform" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="bdr" Property="Background" Value="#333"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button Click="BtnClose_Click" Width="46" Height="32" Background="Transparent" BorderThickness="0" WindowChrome.IsHitTestVisibleInChrome="True">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="bdr" Background="Transparent" CornerRadius="4">
                                    <Path x:Name="icon" Data="{StaticResource IconClose}" Fill="{StaticResource TextSecondary}" Width="10" Height="10" Stretch="Uniform" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="bdr" Property="Background" Value="#C0392B"/>
                                        <Setter TargetName="icon" Property="Fill" Value="White"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </StackPanel>
            </Grid>

            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="220"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Border Grid.Column="0" Background="{StaticResource BgPanel}" BorderBrush="{StaticResource BorderColor}" BorderThickness="0,1,1,0" CornerRadius="0,0,0,8">
                    <Grid Margin="15">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <StackPanel Grid.Row="0">
                            <TextBlock Text="MENU" Foreground="#555" FontSize="10" FontWeight="Bold" Margin="5,0,0,10"/>

                            <Button Click="BtnCreate_Click" Margin="0,0,0,10" Height="40" Cursor="Hand" BorderThickness="0">
                                <Button.Template>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="bdr" Background="{StaticResource PrimaryGradient}" CornerRadius="6">
                                            <TextBlock Text="{Binding BtnAddText}" Foreground="White" FontWeight="SemiBold" FontSize="13" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="bdr" Property="Background" Value="{StaticResource PrimaryGradientHover}"/>
                                            </Trigger>
                                            <Trigger Property="IsPressed" Value="True">
                                                <Setter TargetName="bdr" Property="Opacity" Value="0.9"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>

                            <Button Click="OnRunAllClick" Height="40" Cursor="Hand" Background="Transparent">
                                <Button.Template>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="bdr" BorderBrush="#444" BorderThickness="1" CornerRadius="6" Background="#2A2A2A">
                                            <TextBlock x:Name="txt" Text="{Binding BtnRunText}" Foreground="#CCC" FontWeight="Medium" FontSize="13" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="bdr" Property="BorderBrush" Value="#10B981"/>
                                                <Setter TargetName="bdr" Property="Background" Value="#333"/>
                                                <Setter TargetName="txt" Property="Foreground" Value="White"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>
                            <Button Click="OnDeleteAllClick" Height="40" Cursor="Hand" Background="Transparent" Margin="0,10,0,0">
                                <Button.Template>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="bdr" BorderBrush="#444" BorderThickness="1" CornerRadius="6" Background="#2A2A2A">
                                            <TextBlock x:Name="txt" Text="{Binding BtnDeleteAllText}" Foreground="#CCC" FontWeight="Medium" FontSize="13" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="bdr" Property="BorderBrush" Value="#EF4444"/>
                                                <Setter TargetName="bdr" Property="Background" Value="#3D1A1A"/>
                                                <Setter TargetName="txt" Property="Foreground" Value="White"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>
                        </StackPanel>

                        <Button Grid.Row="1" Click="BtnSettings_Click" Height="40" Cursor="Hand" Background="Transparent" Margin="0,10,0,0">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="bdr" BorderBrush="#E0E0E0" BorderThickness="1" Background="Transparent" CornerRadius="6">
                                        <TextBlock x:Name="txt" Text="⚙  Paramètres" Foreground="#E0E0E0" FontWeight="Medium" FontSize="13" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="bdr" Property="Background" Value="#2A2A2A"/>
                                            <Setter TargetName="bdr" Property="BorderBrush" Value="#10B981"/>
                                            <Setter TargetName="txt" Property="Foreground" Value="#E0E0E0"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                    </Grid>
                </Border>

                <Grid Grid.Column="1" Margin="30,20,30,20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                        <TextBlock Text="{Binding Title}" Foreground="White" FontSize="22" FontWeight="SemiBold"/>
                        <Border Background="#333" CornerRadius="10" Padding="8,2" Margin="10,0,0,0" VerticalAlignment="Center">
                            <TextBlock Text="{Binding JobsList.Count, StringFormat='{}{0} Jobs'}" Foreground="#888" FontSize="11"/>
                        </Border>
                    </StackPanel>

                    <ListBox Grid.Row="1" ItemsSource="{Binding JobsList}" 
                             Background="Transparent" BorderThickness="0" 
                             ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                             SelectionChanged="ListBox_SelectionChanged">

                        <ListBox.ItemContainerStyle>
                            <Style TargetType="ListBoxItem">
                                <Setter Property="Background" Value="Transparent"/>
                                <Setter Property="Margin" Value="0,0,0,10"/>
                                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ListBoxItem">
                                            <ContentPresenter/>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ListBox.ItemContainerStyle>

                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border Background="#252526" CornerRadius="6" BorderBrush="#333" BorderThickness="1">
                                    <Grid Margin="15,12">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="4"/>
                                            <ColumnDefinition Width="15"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <Border Grid.Column="0" Background="{StaticResource PrimaryGradient}" CornerRadius="2"/>

                                        <StackPanel Grid.Column="2" VerticalAlignment="Center">
                                            <TextBlock Text="{Binding Name}" Foreground="White" FontSize="15" FontWeight="SemiBold" Margin="0,0,0,4"/>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="Source: " Foreground="#666" FontSize="11"/>
                                                <TextBlock Text="{Binding Source}" Foreground="#AAA" FontSize="11" Margin="0,0,15,0" TextTrimming="CharacterEllipsis" MaxWidth="250"/>
                                                <TextBlock Text="Cible: " Foreground="#666" FontSize="11"/>
                                                <TextBlock Text="{Binding Target}" Foreground="#AAA" FontSize="11" TextTrimming="CharacterEllipsis" MaxWidth="250"/>
                                            </StackPanel>
                                        </StackPanel>

                                        <StackPanel Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center">

                                            <Button Click="OnRunJobClick" Margin="0,0,8,0" Cursor="Hand" Background="Transparent" BorderThickness="0" ToolTip="Lancer">
                                                <Button.Template>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border x:Name="bdr" Width="32" Height="32" CornerRadius="16" Background="#333">
                                                            <Path x:Name="icon" Data="{StaticResource IconPlay}" Fill="#EEE" Width="9" Height="9" Stretch="Uniform" Margin="2,0,0,0"/>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="bdr" Property="Background" Value="#10B981"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>

                                            <Button Click="OnDeleteClick" Cursor="Hand" Background="Transparent" BorderThickness="0" ToolTip="Supprimer">
                                                <Button.Template>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border x:Name="bdr" Width="32" Height="32" CornerRadius="16" Background="Transparent" BorderBrush="#444" BorderThickness="1">
                                                            <Path x:Name="icon" Data="{StaticResource IconTrash}" Fill="#888" Width="12" Height="12" Stretch="Uniform"/>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="bdr" Property="Background" Value="#3E2020"/>
                                                                <Setter TargetName="bdr" Property="BorderBrush" Value="#C0392B"/>
                                                                <Setter TargetName="icon" Property="Fill" Value="#E74C3C"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Button.Template>
                                            </Button>

                                        </StackPanel>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </Grid>
            </Grid>
        </Grid>
    </Border>
</Window>